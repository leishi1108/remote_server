import logging
from langgraph.constants import END
from utils.graph_utils import SimpleGraphBuilder
from utils.llm_util import CustomLLM, generate_token, AIMessageParser
from typing import TypedDict, List, Dict, Any

logger = logging.getLogger()
logger.setLevel(logging.INFO)


class TextRebuildState(TypedDict):
    input_text: str
    raw_output: str
    json_output: Dict[str, Any]
    error: str


class PartialMatchAgent:
    def __init__(self, text_key, model, tools=None, prompt=None):
        if tools is None:
            tools = []
        self.text_key = text_key
        self.model = model
        self.prompt = prompt if prompt is not None else "你是建筑行业的专家，请根据输入文本内容和下列项目的集合，选择匹配的项目。输出中只包含匹配项目的字典列表。输出结果必须属于下列项目的集合。\n[{'分部': '土石方工程', '分项': '单独土石方', '项目名称': '挖单独土方'}, {'分部': '土石方工程', '分项': '单独土石方', '项目名称': '挖单独石方'}, {'分部': '土石方工程', '分项': '单独土石方', '项目名称': '单独土石方回填'}, {'分部': '土石方工程', '分项': '基础土石方', '项目名称': '挖基坑土方'}, {'分部': '土石方工程', '分项': '基础土石方', '项目名称': '挖沟槽土方'}, {'分部': '土石方工程', '分项': '基础土石方', '项目名称': '挖冻土'}, {'分部': '土石方工程', '分项': '基础土石方', '项目名称': '挖淤泥流砂'}, {'分部': '土石方工程', '分项': '基础土石方', '项目名称': '挖基坑石方'}, {'分部': '土石方工程', '分项': '基础土石方', '项目名称': '挖沟槽石方'}, {'分部': '土石方工程', '分项': '基础土石方', '项目名称': '回填方'}, {'分部': '土石方工程', '分项': '平整场地及其他', '项目名称': '平整场地'}, {'分部': '土石方工程', '分项': '平整场地及其他', '项目名称': '余方弃置'}, {'分部': '地基处理与边坡支护工程', '分项': '地基处理', '项目名称': '换填垫层'}, {'分部': '地基处理与边坡支护工程', '分项': '地基处理', '项目名称': '预压地基'}, {'分部': '地基处理与边坡支护工程', '分项': '地基处理', '项目名称': '强夯地基'}, {'分部': '地基处理与边坡支护工程', '分项': '地基处理', '项目名称': '振冲密实地基（不填料）'}, {'分部': '地基处理与边坡支护工程', '分项': '地基处理', '项目名称': '填料桩复合地基'}, {'分部': '地基处理与边坡支护工程', '分项': '地基处理', '项目名称': '水泥土搅拌桩复合地基'}, {'分部': '地基处理与边坡支护工程', '分项': '地基处理', '项目名称': '旋喷桩复合地基'}, {'分部': '地基处理与边坡支护工程', '分项': '地基处理', '项目名称': '注浆加固地基'}, {'分部': '地基处理与边坡支护工程', '分项': '地基处理', '项目名称': '垫层'}, {'分部': '地基处理与边坡支护工程', '分项': '基坑与边坡支护', '项目名称': '地下连续墙'}, {'分部': '地基处理与边坡支护工程', '分项': '基坑与边坡支护', '项目名称': '型钢水泥土搅拌墙'}, {'分部': '地基处理与边坡支护工程', '分项': '基坑与边坡支护', '项目名称': '咬合灌注桩'}, {'分部': '地基处理与边坡支护工程', '分项': '基坑与边坡支护', '项目名称': '木制桩'}, {'分部': '地基处理与边坡支护工程', '分项': '基坑与边坡支护', '项目名称': '预制钢筋混凝土板桩'}, {'分部': '地基处理与边坡支护工程', '分项': '基坑与边坡支护', '项目名称': '型钢桩、钢板桩'}, {'分部': '地基处理与边坡支护工程', '分项': '基坑与边坡支护', '项目名称': '锚杆（锚索）'}, {'分部': '地基处理与边坡支护工程', '分项': '基坑与边坡支护', '项目名称': '土钉'}, {'分部': '地基处理与边坡支护工程', '分项': '基坑与边坡支护', '项目名称': '喷射混凝土水泥砂浆'}, {'分部': '地基处理与边坡支护工程', '分项': '基坑与边坡支护', '项目名称': '钢筋混凝土支撑'}, {'分部': '地基处理与边坡支护工程', '分项': '基坑与边坡支护', '项目名称': '钢筋混凝土支撑的模板'}, {'分部': '地基处理与边坡支护工程', '分项': '基坑与边坡支护', '项目名称': '钢筋混凝土腰梁、冠梁'}, {'分部': '地基处理与边坡支护工程', '分项': '基坑与边坡支护', '项目名称': '钢筋混凝土腰梁、冠梁的模板'}, {'分部': '地基处理与边坡支护工程', '分项': '基坑与边坡支护', '项目名称': '钢支撑'}, {'分部': '地基处理与边坡支护工程', '分项': '基坑与边坡支护', '项目名称': '钢腰梁、冠梁'}, {'分部': '地基处理与边坡支护工程', '分项': '基坑与边坡支护', '项目名称': '泥浆外运'}, {'分部': '桩基工程', '分项': '预制桩', '项目名称': '预制钢筋混凝土实心桩'}, {'分部': '桩基工程', '分项': '预制桩', '项目名称': '预制钢筋混凝土空心桩'}, {'分部': '桩基工程', '分项': '预制桩', '项目名称': '钢管桩'}, {'分部': '桩基工程', '分项': '预制桩', '项目名称': '静钻根植桩'}, {'分部': '桩基工程', '分项': '预制桩', '项目名称': '截（凿）桩头'}, {'分部': '桩基工程', '分项': '灌注桩', '项目名称': '泥浆护壁成孔灌注桩'}, {'分部': '桩基工程', '分项': '灌注桩', '项目名称': '沉管灌注桩'}, {'分部': '桩基工程', '分项': '灌注桩', '项目名称': '干作业成孔灌注桩'}, {'分部': '桩基工程', '分项': '灌注桩', '项目名称': '挖孔桩土（石）方'}, {'分部': '桩基工程', '分项': '灌注桩', '项目名称': '人工挖孔灌注桩'}, {'分部': '桩基工程', '分项': '灌注桩', '项目名称': '钻孔压浆桩'}, {'分部': '桩基工程', '分项': '灌注桩', '项目名称': '灌注桩后注浆'}, {'分部': '砌筑工程', '分项': '砖砌体', '项目名称': '砖基础'}, {'分部': '砌筑工程', '分项': '砖砌体', '项目名称': '实心砖墙'}, {'分部': '砌筑工程', '分项': '砖砌体', '项目名称': '多孔砖墙'}, {'分部': '砌筑工程', '分项': '砖砌体', '项目名称': '空心砖墙'}, {'分部': '砌筑工程', '分项': '砖砌体', '项目名称': '实心砖柱'}, {'分部': '砌筑工程', '分项': '砖砌体', '项目名称': '多孔砖柱'}, {'分部': '砌筑工程', '分项': '砖砌体', '项目名称': '砖检查井、水池、化粪池'}, {'分部': '砌筑工程', '分项': '砖砌体', '项目名称': '零星砌砖'}, {'分部': '砌筑工程', '分项': '砖砌体', '项目名称': '砖散水、地坪'}, {'分部': '砌筑工程', '分项': '砖砌体', '项目名称': '砖地沟、明沟'}, {'分部': '砌筑工程', '分项': '砖砌体', '项目名称': '贴砌砖墙'}, {'分部': '砌筑工程', '分项': '砌块砌体', '项目名称': '砌块墙'}, {'分部': '砌筑工程', '分项': '砌块砌体', '项目名称': '砌块柱'}, {'分部': '砌筑工程', '分项': '石砌体', '项目名称': '石基础'}, {'分部': '砌筑工程', '分项': '石砌体', '项目名称': '石勒脚'}, {'分部': '砌筑工程', '分项': '石砌体', '项目名称': '石墙'}, {'分部': '砌筑工程', '分项': '石砌体', '项目名称': '石挡土墙'}, {'分部': '砌筑工程', '分项': '石砌体', '项目名称': '石柱'}, {'分部': '砌筑工程', '分项': '石砌体', '项目名称': '石栏杆'}, {'分部': '砌筑工程', '分项': '石砌体', '项目名称': '石护坡'}, {'分部': '砌筑工程', '分项': '石砌体', '项目名称': '石台阶'}, {'分部': '砌筑工程', '分项': '石砌体', '项目名称': '石坡道'}, {'分部': '砌筑工程', '分项': '石砌体', '项目名称': '石地沟、明沟'}, {'分部': '砌筑工程', '分项': '轻质墙板', '项目名称': '轻质墙板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '基础及楼地面垫层', '项目名称': '基础垫层'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '基础及楼地面垫层', '项目名称': '楼地面垫层'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '独立基础'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '条形基础'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '筏形基础'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '设备基础'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '基础联系梁'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '钢筋混凝土柱'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '劲性钢筋混凝土柱'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '钢管混凝土柱'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '地下室外墙'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '钢筋混凝土墙'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '钢筋混凝土梁'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '劲性钢筋混凝土梁'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '实心楼板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '空心楼板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '空心板内置筒芯'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '空心板内置箱体'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '坡屋面板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '坡道板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '其他板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '楼梯'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '构造柱'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '圈梁'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '过梁'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '填充混凝土'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '零星现浇构件'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '挡土墙'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '电缆沟、地沟'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '化粪池、检查井'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '散水'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '地坪'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '坡道'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '台阶'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '现浇混凝土构件', '项目名称': '后浇带'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '一般预制混凝土构件', '项目名称': '矩形柱'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '一般预制混凝土构件', '项目名称': '异形柱'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '一般预制混凝土构件', '项目名称': '矩形梁'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '一般预制混凝土构件', '项目名称': '异形梁'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '一般预制混凝土构件', '项目名称': '拱形梁'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '一般预制混凝土构件', '项目名称': '过梁'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '一般预制混凝土构件', '项目名称': '吊车梁'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '一般预制混凝土构件', '项目名称': '其他梁'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '一般预制混凝土构件', '项目名称': '屋架'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '一般预制混凝土构件', '项目名称': '天窗架'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '一般预制混凝土构件', '项目名称': '实心条板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '一般预制混凝土构件', '项目名称': '空心条板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '一般预制混凝土构件', '项目名称': '大型板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '一般预制混凝土构件', '项目名称': '盖板、井圈'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '一般预制混凝土构件', '项目名称': '垃圾道、通风道、烟道'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '一般预制混凝土构件', '项目名称': '其他构件'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '装配式预制混凝土构件', '项目名称': '实心柱'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '装配式预制混凝土构件', '项目名称': '单梁'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '装配式预制混凝土构件', '项目名称': '叠合梁'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '装配式预制混凝土构件', '项目名称': '叠合楼板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '装配式预制混凝土构件', '项目名称': '实心剪力墙板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '装配式预制混凝土构件', '项目名称': '夹心保温剪力墙板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '装配式预制混凝土构件', '项目名称': '叠合剪力墙板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '装配式预制混凝土构件', '项目名称': '外挂墙板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '装配式预制混凝土构件', '项目名称': '女儿墙'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '装配式预制混凝土构件', '项目名称': '楼梯'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '装配式预制混凝土构件', '项目名称': '阳台'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '装配式预制混凝土构件', '项目名称': '凸（飘）窗'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '装配式预制混凝土构件', '项目名称': '空调板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '装配式预制混凝土构件', '项目名称': '其他构件'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '装配式预制混凝土构件', '项目名称': '叠合梁、板后浇混凝土'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '装配式预制混凝土构件', '项目名称': '叠合剪力墙后浇混凝土'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '垫层模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '基础模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '基础联系梁模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '柱面模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '墙面模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '梁模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '楼板、屋面板、坡道板模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '其他板模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '柱帽模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '楼梯模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '构造柱模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '圈梁模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '过梁模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '零星现浇构件模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '挡土墙模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '井（池）模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '电缆沟、地沟模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '台阶模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '后浇带模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '混凝土模板', '项目名称': '叠合构件后浇混凝土模板'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '现浇混凝土基础及联系梁钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '现浇混凝土柱钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '现浇混凝土地下室外墙钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '现浇混凝土墙钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '现浇混凝土梁钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '现浇混凝土楼板及屋面板钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '现浇混凝土坡道板钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '现浇混凝土其他板钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '现浇混凝土楼梯钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '现浇混凝土二次结构钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '现浇混凝土零星构件钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '现浇混凝土挡土墙钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '现浇混凝土散水、坡道钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '现浇混凝土地坪钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '现浇混凝土台阶钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '叠合构件后浇混凝土钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '砌体工程内配钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '屋面刚性层内配钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '装饰工程内配钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '钢筋网片'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '钢筋笼'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '预应力钢筋'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '钢丝网'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '螺栓'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '预埋铁件'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '结构抗（隔）震支座'}, {'分部': '混凝土及钢筋混凝土工程', '分项': '钢筋及螺栓、铁件', '项目名称': '阻尼器'}, {'分部': '金属结构工程', '分项': '钢网架', '项目名称': '钢网架'}, {'分部': '金属结构工程', '分项': '钢网架', '项目名称': '钢网壳'}, {'分部': '金属结构工程', '分项': '钢屋架、钢托架、钢桁架', '项目名称': '钢屋架'}, {'分部': '金属结构工程', '分项': '钢屋架、钢托架、钢桁架', '项目名称': '钢托架'}, {'分部': '金属结构工程', '分项': '钢屋架、钢托架、钢桁架', '项目名称': '钢桁架'}, {'分部': '金属结构工程', '分项': '钢柱', '项目名称': '实腹钢柱'}, {'分部': '金属结构工程', '分项': '钢柱', '项目名称': '空腹钢柱'}, {'分部': '金属结构工程', '分项': '钢柱', '项目名称': '钢管柱'}, {'分部': '金属结构工程', '分项': '钢梁', '项目名称': '钢梁'}, {'分部': '金属结构工程', '分项': '钢梁', '项目名称': '钢吊车梁'}, {'分部': '金属结构工程', '分项': '钢板楼板、墙板、屋面板', '项目名称': '钢板楼板'}, {'分部': '金属结构工程', '分项': '钢板楼板、墙板、屋面板', '项目名称': '钢板墙板'}, {'分部': '金属结构工程', '分项': '钢板楼板、墙板、屋面板', '项目名称': '钢屋面板'}, {'分部': '金属结构工程', '分项': '钢天窗架、墙架、挡风架', '项目名称': '钢天窗架'}, {'分部': '金属结构工程', '分项': '钢天窗架、墙架、挡风架', '项目名称': '钢挡风架'}, {'分部': '金属结构工程', '分项': '钢天窗架、墙架、挡风架', '项目名称': '钢墙架'}, {'分部': '金属结构工程', '分项': '其他钢构件', '项目名称': '钢拉索'}, {'分部': '金属结构工程', '分项': '其他钢构件', '项目名称': '钢支撑、钢拉条'}, {'分部': '金属结构工程', '分项': '其他钢构件', '项目名称': '钢檩条'}, {'分部': '金属结构工程', '分项': '其他钢构件', '项目名称': '钢平台'}, {'分部': '金属结构工程', '分项': '其他钢构件', '项目名称': '钢走道'}, {'分部': '金属结构工程', '分项': '其他钢构件', '项目名称': '钢梯'}, {'分部': '金属结构工程', '分项': '其他钢构件', '项目名称': '钢护栏'}, {'分部': '金属结构工程', '分项': '其他钢构件', '项目名称': '钢漏斗'}, {'分部': '金属结构工程', '分项': '其他钢构件', '项目名称': '钢板天沟'}, {'分部': '金属结构工程', '分项': '其他钢构件', '项目名称': '零星钢构件'}, {'分部': '金属结构工程', '分项': '钢构件制作及其他', '项目名称': '钢构件制作'}, {'分部': '金属结构工程', '分项': '钢构件制作及其他', '项目名称': '高强螺栓'}, {'分部': '金属结构工程', '分项': '钢构件制作及其他', '项目名称': '支座'}, {'分部': '金属结构工程', '分项': '钢构件制作及其他', '项目名称': '剪力栓钉'}, {'分部': '金属结构工程', '分项': '金属制品', '项目名称': '空调金属百页护栏'}, {'分部': '金属结构工程', '分项': '金属制品', '项目名称': '金属栅栏'}, {'分部': '金属结构工程', '分项': '金属制品', '项目名称': '金属网栏'}, {'分部': '金属结构工程', '分项': '金属制品', '项目名称': '金属井（沟）盖及盖座'}, {'分部': '木结构工程', '分项': '木屋架', '项目名称': '屋架'}, {'分部': '木结构工程', '分项': '木构件', '项目名称': '木柱'}, {'分部': '木结构工程', '分项': '木构件', '项目名称': '木梁'}, {'分部': '木结构工程', '分项': '木构件', '项目名称': '木檩'}, {'分部': '木结构工程', '分项': '木构件', '项目名称': '木楼梯'}, {'分部': '木结构工程', '分项': '木构件', '项目名称': '装配式木楼梯'}, {'分部': '木结构工程', '分项': '木构件', '项目名称': '其他木构件'}, {'分部': '木结构工程', '分项': '屋面木基层', '项目名称': '屋面木基层'}, {'分部': '门窗工程', '分项': '木门', '项目名称': '木质门'}, {'分部': '门窗工程', '分项': '木门', '项目名称': '木质门带套'}, {'分部': '门窗工程', '分项': '木门', '项目名称': '木质连窗门'}, {'分部': '门窗工程', '分项': '木门', '项目名称': '木质防火门'}, {'分部': '门窗工程', '分项': '木门', '项目名称': '木门框'}, {'分部': '门窗工程', '分项': '木门', '项目名称': '门锁安装'}, {'分部': '门窗工程', '分项': '金属门', '项目名称': '金属（塑钢）门'}, {'分部': '门窗工程', '分项': '金属门', '项目名称': '彩板门'}, {'分部': '门窗工程', '分项': '金属门', '项目名称': '防盗门'}, {'分部': '门窗工程', '分项': '金属门', '项目名称': '钢质防火门'}, {'分部': '门窗工程', '分项': '金属卷帘（闸）门', '项目名称': '金属卷帘（闸）门'}, {'分部': '门窗工程', '分项': '金属卷帘（闸）门', '项目名称': '防火卷帘（闸）门'}, {'分部': '门窗工程', '分项': '厂库房大门、特种门', '项目名称': '木板大门'}, {'分部': '门窗工程', '分项': '厂库房大门、特种门', '项目名称': '钢木大门'}, {'分部': '门窗工程', '分项': '厂库房大门、特种门', '项目名称': '全钢板大门'}, {'分部': '门窗工程', '分项': '厂库房大门、特种门', '项目名称': '防护铁丝门'}, {'分部': '门窗工程', '分项': '厂库房大门、特种门', '项目名称': '金属格栅门'}, {'分部': '门窗工程', '分项': '厂库房大门、特种门', '项目名称': '钢质花饰大门'}, {'分部': '门窗工程', '分项': '厂库房大门、特种门', '项目名称': '特种门'}, {'分部': '门窗工程', '分项': '其他门', '项目名称': '电子感应门'}, {'分部': '门窗工程', '分项': '其他门', '项目名称': '电动旋转门'}, {'分部': '门窗工程', '分项': '其他门', '项目名称': '电动伸缩门'}, {'分部': '门窗工程', '分项': '其他门', '项目名称': '全玻自由门'}, {'分部': '门窗工程', '分项': '其他门', '项目名称': '不锈钢饰面门'}, {'分部': '门窗工程', '分项': '其他门', '项目名称': '复合材料门'}, {'分部': '门窗工程', '分项': '木窗', '项目名称': '木质窗'}, {'分部': '门窗工程', '分项': '木窗', '项目名称': '木飘（凸）窗'}, {'分部': '门窗工程', '分项': '木窗', '项目名称': '木橱窗'}, {'分部': '门窗工程', '分项': '木窗', '项目名称': '木纱窗'}, {'分部': '门窗工程', '分项': '金属窗', '项目名称': '金属（塑钢）窗'}, {'分部': '门窗工程', '分项': '金属窗', '项目名称': '金属防火窗'}, {'分部': '门窗工程', '分项': '金属窗', '项目名称': '金属百叶窗'}, {'分部': '门窗工程', '分项': '金属窗', '项目名称': '金属纱窗'}, {'分部': '门窗工程', '分项': '金属窗', '项目名称': '金属格栅窗'}, {'分部': '门窗工程', '分项': '金属窗', '项目名称': '金属（塑钢）橱窗'}, {'分部': '门窗工程', '分项': '金属窗', '项目名称': '金属（塑钢）飘（凸）窗'}, {'分部': '门窗工程', '分项': '金属窗', '项目名称': '彩板窗'}, {'分部': '门窗工程', '分项': '金属窗', '项目名称': '复合材料窗'}, {'分部': '门窗工程', '分项': '门窗套', '项目名称': '木门窗套'}, {'分部': '门窗工程', '分项': '门窗套', '项目名称': '金属门窗套'}, {'分部': '门窗工程', '分项': '门窗套', '项目名称': '石材门窗套'}, {'分部': '门窗工程', '分项': '门窗套', '项目名称': '成品门窗套'}, {'分部': '门窗工程', '分项': '窗台板', '项目名称': '窗台板'}, {'分部': '门窗工程', '分项': '窗帘、窗帘盒、轨', '项目名称': '窗帘'}, {'分部': '门窗工程', '分项': '窗帘、窗帘盒、轨', '项目名称': '窗帘盒'}, {'分部': '门窗工程', '分项': '窗帘、窗帘盒、轨', '项目名称': '窗帘轨'}, {'分部': '屋面及防水工程', '分项': '屋面', '项目名称': '瓦屋面'}, {'分部': '屋面及防水工程', '分项': '屋面', '项目名称': '阳光板屋面'}, {'分部': '屋面及防水工程', '分项': '屋面', '项目名称': '玻璃钢屋面'}, {'分部': '屋面及防水工程', '分项': '屋面', '项目名称': '玻璃采光顶'}, {'分部': '屋面及防水工程', '分项': '屋面', '项目名称': '金属板幕墙顶'}, {'分部': '屋面及防水工程', '分项': '屋面', '项目名称': '膜结构屋面'}, {'分部': '屋面及防水工程', '分项': '屋面', '项目名称': '屋面成品天沟、檐沟'}, {'分部': '屋面及防水工程', '分项': '屋面', '项目名称': '屋面变形缝'}, {'分部': '屋面及防水工程', '分项': '屋面防水及其他', '项目名称': '屋面卷材防水'}, {'分部': '屋面及防水工程', '分项': '屋面防水及其他', '项目名称': '屋面涂膜防水'}, {'分部': '屋面及防水工程', '分项': '屋面防水及其他', '项目名称': '屋面柔性隔离层'}, {'分部': '屋面及防水工程', '分项': '屋面防水及其他', '项目名称': '屋面刚性层'}, {'分部': '屋面及防水工程', '分项': '屋面防水及其他', '项目名称': '屋面排水管'}, {'分部': '屋面及防水工程', '分项': '屋面防水及其他', '项目名称': '屋面排（透）气管'}, {'分部': '屋面及防水工程', '分项': '屋面防水及其他', '项目名称': '屋面（廊、阳台）泄（吐）水管'}, {'分部': '屋面及防水工程', '分项': '屋面防水及其他', '项目名称': '屋面排水板'}, {'分部': '屋面及防水工程', '分项': '屋面防水及其他', '项目名称': '屋面天沟、檐沟防水'}, {'分部': '屋面及防水工程', '分项': '墙面防水、防潮', '项目名称': '墙面卷材防水'}, {'分部': '屋面及防水工程', '分项': '墙面防水、防潮', '项目名称': '墙面涂膜防水'}, {'分部': '屋面及防水工程', '分项': '墙面防水、防潮', '项目名称': '墙面砂浆防水'}, {'分部': '屋面及防水工程', '分项': '墙面防水、防潮', '项目名称': '墙面变形缝'}, {'分部': '屋面及防水工程', '分项': '楼（地）面防水、防潮', '项目名称': '楼（地）面卷材防水'}, {'分部': '屋面及防水工程', '分项': '楼（地）面防水、防潮', '项目名称': '楼（地）面涂膜防水'}, {'分部': '屋面及防水工程', '分项': '楼（地）面防水、防潮', '项目名称': '楼（地）面砂浆防水(防潮)'}, {'分部': '屋面及防水工程', '分项': '楼（地）面防水、防潮', '项目名称': '楼（地）面变形缝'}, {'分部': '屋面及防水工程', '分项': '基础防水及止水带', '项目名称': '基础卷材防水'}, {'分部': '屋面及防水工程', '分项': '基础防水及止水带', '项目名称': '基础涂膜防水'}, {'分部': '屋面及防水工程', '分项': '基础防水及止水带', '项目名称': '止水带'}, {'分部': '保温、隔热、防腐工程', '分项': '保温、隔热', '项目名称': '保温隔热屋面'}, {'分部': '保温、隔热、防腐工程', '分项': '保温、隔热', '项目名称': '保温隔热天棚'}, {'分部': '保温、隔热、防腐工程', '分项': '保温、隔热', '项目名称': '保温隔热墙面'}, {'分部': '保温、隔热、防腐工程', '分项': '保温、隔热', '项目名称': '保温柱、梁'}, {'分部': '保温、隔热、防腐工程', '分项': '保温、隔热', '项目名称': '保温隔热楼地面'}, {'分部': '保温、隔热、防腐工程', '分项': '保温、隔热', '项目名称': '其他保温隔热'}, {'分部': '保温、隔热、防腐工程', '分项': '防腐面层', '项目名称': '防腐混凝土面层'}, {'分部': '保温、隔热、防腐工程', '分项': '防腐面层', '项目名称': '防腐砂浆面层'}, {'分部': '保温、隔热、防腐工程', '分项': '防腐面层', '项目名称': '防腐胶泥面层'}, {'分部': '保温、隔热、防腐工程', '分项': '防腐面层', '项目名称': '玻璃钢防腐面层'}, {'分部': '保温、隔热、防腐工程', '分项': '防腐面层', '项目名称': '聚氯乙烯板面层'}, {'分部': '保温、隔热、防腐工程', '分项': '防腐面层', '项目名称': '块料防腐面层'}, {'分部': '保温、隔热、防腐工程', '分项': '防腐面层', '项目名称': '池、槽块料防腐面层'}, {'分部': '保温、隔热、防腐工程', '分项': '其他防腐', '项目名称': '隔离层防腐'}, {'分部': '保温、隔热、防腐工程', '分项': '其他防腐', '项目名称': '砌筑沥青浸渍砖'}, {'分部': '保温、隔热、防腐工程', '分项': '其他防腐', '项目名称': '防腐涂料'}, {'分部': '楼地面装饰工程', '分项': '整体面层及找平层', '项目名称': '水泥砂浆楼地面'}, {'分部': '楼地面装饰工程', '分项': '整体面层及找平层', '项目名称': '细石混凝土楼地面'}, {'分部': '楼地面装饰工程', '分项': '整体面层及找平层', '项目名称': '自流平楼地面'}, {'分部': '楼地面装饰工程', '分项': '整体面层及找平层', '项目名称': '耐磨楼地面'}, {'分部': '楼地面装饰工程', '分项': '整体面层及找平层', '项目名称': '塑胶地面'}, {'分部': '楼地面装饰工程', '分项': '整体面层及找平层', '项目名称': '平面砂浆找平层'}, {'分部': '楼地面装饰工程', '分项': '整体面层及找平层', '项目名称': '细石混凝土找平层'}, {'分部': '楼地面装饰工程', '分项': '整体面层及找平层', '项目名称': '自流平找平层'}, {'分部': '楼地面装饰工程', '分项': '石材及块料面层', '项目名称': '石材楼地面'}, {'分部': '楼地面装饰工程', '分项': '石材及块料面层', '项目名称': '拼碎石材楼地面'}, {'分部': '楼地面装饰工程', '分项': '石材及块料面层', '项目名称': '块料楼地面'}, {'分部': '楼地面装饰工程', '分项': '橡塑面层', '项目名称': '橡塑板楼地面'}, {'分部': '楼地面装饰工程', '分项': '橡塑面层', '项目名称': '橡塑卷材楼地面'}, {'分部': '楼地面装饰工程', '分项': '橡塑面层', '项目名称': '塑胶运动地板'}, {'分部': '楼地面装饰工程', '分项': '其他材料面层', '项目名称': '地毯楼地面'}, {'分部': '楼地面装饰工程', '分项': '其他材料面层', '项目名称': '竹、木（复合）地板'}, {'分部': '楼地面装饰工程', '分项': '其他材料面层', '项目名称': '金属复合地板'}, {'分部': '楼地面装饰工程', '分项': '踢脚线', '项目名称': '水泥砂浆踢脚线'}, {'分部': '楼地面装饰工程', '分项': '踢脚线', '项目名称': '石材踢脚线'}, {'分部': '楼地面装饰工程', '分项': '踢脚线', '项目名称': '块料踢脚线'}, {'分部': '楼地面装饰工程', '分项': '踢脚线', '项目名称': '塑料板踢脚线'}, {'分部': '楼地面装饰工程', '分项': '踢脚线', '项目名称': '木质踢脚线'}, {'分部': '楼地面装饰工程', '分项': '踢脚线', '项目名称': '金属踢脚线'}, {'分部': '楼地面装饰工程', '分项': '楼梯面层', '项目名称': '水泥砂浆楼梯'}, {'分部': '楼地面装饰工程', '分项': '楼梯面层', '项目名称': '石材楼梯'}, {'分部': '楼地面装饰工程', '分项': '楼梯面层', '项目名称': '块料楼梯'}, {'分部': '楼地面装饰工程', '分项': '楼梯面层', '项目名称': '地毯楼梯'}, {'分部': '楼地面装饰工程', '分项': '楼梯面层', '项目名称': '木板（复合）楼梯'}, {'分部': '楼地面装饰工程', '分项': '楼梯面层', '项目名称': '橡塑板楼梯'}, {'分部': '楼地面装饰工程', '分项': '楼梯面层', '项目名称': '橡塑卷材楼梯'}, {'分部': '楼地面装饰工程', '分项': '台阶装饰', '项目名称': '水泥砂浆台阶'}, {'分部': '楼地面装饰工程', '分项': '台阶装饰', '项目名称': '石材台阶'}, {'分部': '楼地面装饰工程', '分项': '台阶装饰', '项目名称': '拼碎块料台阶'}, {'分部': '楼地面装饰工程', '分项': '台阶装饰', '项目名称': '块料台阶'}, {'分部': '楼地面装饰工程', '分项': '台阶装饰', '项目名称': '剁假石台阶'}, {'分部': '楼地面装饰工程', '分项': '零星装饰项目', '项目名称': '石材零星项目'}, {'分部': '楼地面装饰工程', '分项': '零星装饰项目', '项目名称': '拼碎石材零星项目'}, {'分部': '楼地面装饰工程', '分项': '零星装饰项目', '项目名称': '块料零星项目'}, {'分部': '楼地面装饰工程', '分项': '零星装饰项目', '项目名称': '水泥砂浆零星项目'}, {'分部': '楼地面装饰工程', '分项': '零星装饰项目', '项目名称': '车库标线、标识'}, {'分部': '楼地面装饰工程', '分项': '零星装饰项目', '项目名称': '广角镜安装'}, {'分部': '楼地面装饰工程', '分项': '零星装饰项目', '项目名称': '标志牌'}, {'分部': '楼地面装饰工程', '分项': '零星装饰项目', '项目名称': '车挡'}, {'分部': '楼地面装饰工程', '分项': '零星装饰项目', '项目名称': '减速带'}, {'分部': '楼地面装饰工程', '分项': '零星装饰项目', '项目名称': '墙柱面防撞条'}, {'分部': '楼地面装饰工程', '分项': '装配式楼地面及其他', '项目名称': '架空地板'}, {'分部': '楼地面装饰工程', '分项': '装配式楼地面及其他', '项目名称': '装配式踢脚线'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '墙、柱面抹灰', '项目名称': '墙、柱面一般抹灰'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '墙、柱面抹灰', '项目名称': '墙、柱面装饰抹灰'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '墙、柱面抹灰', '项目名称': '墙、柱面勾缝'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '墙、柱面抹灰', '项目名称': '立面砂浆找平层'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '零星抹灰', '项目名称': '零星项目一般抹灰'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '零星抹灰', '项目名称': '零星项目装饰抹灰'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '零星抹灰', '项目名称': '零星项目砂浆找平'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '墙、柱面块料面层', '项目名称': '石材墙、柱面'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '墙、柱面块料面层', '项目名称': '拼碎石材墙、柱面'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '墙、柱面块料面层', '项目名称': '块料墙、柱面'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '零星块料面层', '项目名称': '石材零星项目'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '零星块料面层', '项目名称': '块料零星项目'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '零星块料面层', '项目名称': '拼碎石材块料零星项目'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '墙、柱饰面', '项目名称': '墙、柱面装饰板'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '墙、柱饰面', '项目名称': '墙、柱面装饰浮雕'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '墙、柱饰面', '项目名称': '墙、柱面装配式装饰板'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '墙、柱饰面', '项目名称': '墙、柱面软包'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '墙、柱饰面', '项目名称': '墙、柱面保温装饰一体板'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '幕墙工程', '项目名称': '构件式玻璃幕墙'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '幕墙工程', '项目名称': '构件式石材幕墙'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '幕墙工程', '项目名称': '构件式金属板幕墙'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '幕墙工程', '项目名称': '构件式人造板幕墙'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '幕墙工程', '项目名称': '单元式幕墙'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '幕墙工程', '项目名称': '全玻（无框玻璃）幕墙'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '幕墙工程', '项目名称': '点支承玻璃幕墙'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '幕墙工程', '项目名称': '幕墙开启扇'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '隔墙、隔断', '项目名称': '轻质隔墙'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '隔墙、隔断', '项目名称': '轻质隔断'}, {'分部': '墙、柱面装饰与隔断、幕墙工程', '分项': '隔墙、隔断', '项目名称': '成品隔断'}, {'分部': '天棚工程', '分项': '天棚抹灰', '项目名称': '天棚抹灰'}, {'分部': '天棚工程', '分项': '天棚吊顶', '项目名称': '平面吊顶天棚'}, {'分部': '天棚工程', '分项': '天棚吊顶', '项目名称': '跌级吊顶天棚'}, {'分部': '天棚工程', '分项': '天棚吊顶', '项目名称': '艺术造型吊顶天棚'}, {'分部': '天棚工程', '分项': '天棚吊顶', '项目名称': '格栅吊顶'}, {'分部': '天棚工程', '分项': '天棚吊顶', '项目名称': '吊筒吊顶'}, {'分部': '天棚工程', '分项': '天棚吊顶', '项目名称': '藤条造型悬挂吊顶'}, {'分部': '天棚工程', '分项': '天棚吊顶', '项目名称': '织物软雕吊顶'}, {'分部': '天棚工程', '分项': '天棚吊顶', '项目名称': '装饰网架吊顶'}, {'分部': '天棚工程', '分项': '天棚其他装饰', '项目名称': '成品装饰带'}, {'分部': '天棚工程', '分项': '天棚其他装饰', '项目名称': '成品装饰口'}, {'分部': '天棚工程', '分项': '天棚其他装饰', '项目名称': '挡烟垂壁'}, {'分部': '天棚工程', '分项': '天棚其他装饰', '项目名称': '块料梁面'}, {'分部': '天棚工程', '分项': '天棚其他装饰', '项目名称': '装饰板梁面'}, {'分部': '油漆、涂料、裱糊工程', '分项': '木材面油漆', '项目名称': '木门油漆'}, {'分部': '油漆、涂料、裱糊工程', '分项': '木材面油漆', '项目名称': '木窗油漆'}, {'分部': '油漆、涂料、裱糊工程', '分项': '木材面油漆', '项目名称': '木板条、线条油漆'}, {'分部': '油漆、涂料、裱糊工程', '分项': '木材面油漆', '项目名称': '木材面油漆'}, {'分部': '油漆、涂料、裱糊工程', '分项': '木材面油漆', '项目名称': '木地板油漆'}, {'分部': '油漆、涂料、裱糊工程', '分项': '木材面油漆', '项目名称': '木地板烫硬蜡面'}, {'分部': '油漆、涂料、裱糊工程', '分项': '金属面油漆', '项目名称': '金属门油漆'}, {'分部': '油漆、涂料、裱糊工程', '分项': '金属面油漆', '项目名称': '金属窗油漆'}, {'分部': '油漆、涂料、裱糊工程', '分项': '金属面油漆', '项目名称': '金属面油漆'}, {'分部': '油漆、涂料、裱糊工程', '分项': '金属面油漆', '项目名称': '金属构件油漆'}, {'分部': '油漆、涂料、裱糊工程', '分项': '金属面油漆', '项目名称': '金属构件除锈'}, {'分部': '油漆、涂料、裱糊工程', '分项': '抹灰面油漆', '项目名称': '抹灰面油漆'}, {'分部': '油漆、涂料、裱糊工程', '分项': '抹灰面油漆', '项目名称': '抹灰线条油漆'}, {'分部': '油漆、涂料、裱糊工程', '分项': '抹灰面油漆', '项目名称': '刮腻子'}, {'分部': '油漆、涂料、裱糊工程', '分项': '喷刷涂料', '项目名称': '墙面喷刷涂料'}, {'分部': '油漆、涂料、裱糊工程', '分项': '喷刷涂料', '项目名称': '天棚喷刷涂料'}, {'分部': '油漆、涂料、裱糊工程', '分项': '喷刷涂料', '项目名称': '空花格、栏杆刷涂料'}, {'分部': '油漆、涂料、裱糊工程', '分项': '喷刷涂料', '项目名称': '线条刷涂料'}, {'分部': '油漆、涂料、裱糊工程', '分项': '喷刷涂料', '项目名称': '金属面刷防火涂料'}, {'分部': '油漆、涂料、裱糊工程', '分项': '喷刷涂料', '项目名称': '金属构件刷防火涂料'}, {'分部': '油漆、涂料、裱糊工程', '分项': '喷刷涂料', '项目名称': '木材构件喷刷防火涂料'}, {'分部': '油漆、涂料、裱糊工程', '分项': '裱糊', '项目名称': '墙纸裱糊'}, {'分部': '油漆、涂料、裱糊工程', '分项': '裱糊', '项目名称': '织锦缎裱糊'}, {'分部': '其他装饰工程', '分项': '柜、架、台', '项目名称': '装饰柜'}, {'分部': '其他装饰工程', '分项': '柜、架、台', '项目名称': '装饰架'}, {'分部': '其他装饰工程', '分项': '柜、架、台', '项目名称': '装饰台'}, {'分部': '其他装饰工程', '分项': '柜、架、台', '项目名称': '成品柜、架、台'}, {'分部': '其他装饰工程', '分项': '装饰线条', '项目名称': '成品装饰线条'}, {'分部': '其他装饰工程', '分项': '扶手、栏杆、栏板装饰', '项目名称': '带扶手的栏杆、栏板'}, {'分部': '其他装饰工程', '分项': '扶手、栏杆、栏板装饰', '项目名称': '不带扶手的栏杆、栏板'}, {'分部': '其他装饰工程', '分项': '扶手、栏杆、栏板装饰', '项目名称': '扶手'}, {'分部': '其他装饰工程', '分项': '扶手、栏杆、栏板装饰', '项目名称': '成品带扶手栏杆、栏板'}, {'分部': '其他装饰工程', '分项': '暖气罩', '项目名称': '暖气罩'}, {'分部': '其他装饰工程', '分项': '暖气罩', '项目名称': '成品暖气罩'}, {'分部': '其他装饰工程', '分项': '浴厕配件', '项目名称': '洗漱台'}, {'分部': '其他装饰工程', '分项': '浴厕配件', '项目名称': '洗厕配件'}, {'分部': '其他装饰工程', '分项': '浴厕配件', '项目名称': '镜面玻璃'}, {'分部': '其他装饰工程', '分项': '浴厕配件', '项目名称': '镜箱'}, {'分部': '其他装饰工程', '分项': '雨篷、旗杆、装饰柱', '项目名称': '装饰板雨篷'}, {'分部': '其他装饰工程', '分项': '雨篷、旗杆、装饰柱', '项目名称': '金属旗杆'}, {'分部': '其他装饰工程', '分项': '雨篷、旗杆、装饰柱', '项目名称': '成品装饰柱'}, {'分部': '其他装饰工程', '分项': '招牌、灯箱', '项目名称': '平面、箱式招牌'}, {'分部': '其他装饰工程', '分项': '招牌、灯箱', '项目名称': '竖式标箱'}, {'分部': '其他装饰工程', '分项': '招牌、灯箱', '项目名称': '灯箱'}, {'分部': '其他装饰工程', '分项': '招牌、灯箱', '项目名称': '信报箱'}, {'分部': '其他装饰工程', '分项': '美术字', '项目名称': '美术字'}, {'分部': '措施项目', '分项': '措施项目', '项目名称': '脚手架'}, {'分部': '措施项目', '分项': '措施项目', '项目名称': '垂直运输'}, {'分部': '措施项目', '分项': '措施项目', '项目名称': '其他大型机械进出场及安拆'}, {'分部': '措施项目', '分项': '措施项目', '项目名称': '施工排水'}, {'分部': '措施项目', '分项': '措施项目', '项目名称': '施工降水'}, {'分部': '措施项目', '分项': '措施项目', '项目名称': '临时设施'}, {'分部': '措施项目', '分项': '措施项目', '项目名称': '文明施工'}, {'分部': '措施项目', '分项': '措施项目', '项目名称': '环境保护'}, {'分部': '措施项目', '分项': '措施项目', '项目名称': '安全生产'}, {'分部': '措施项目', '分项': '措施项目', '项目名称': '冬雨季施工增加'}, {'分部': '措施项目', '分项': '措施项目', '项目名称': '夜间施工增加'}, {'分部': '措施项目', '分项': '措施项目', '项目名称': '特殊地区施工增加'}, {'分部': '措施项目', '分项': '措施项目', '项目名称': '二次搬运'}, {'分部': '措施项目', '分项': '措施项目', '项目名称': '已完工程及设备保护'}, {'分部': '措施项目', '分项': '措施项目', '项目名称': '既有建（构）筑物、设施保护'}]。"


        super().__init__()

    def call_llm_node(self, state: TextRebuildState):
        """调用大模型并获取原始输出"""
        try:
            prompt = f"{self.prompt}\n输入: {state['input_text']}\n输出: "
            print(f"prompt: {prompt}\n")
            raw_response = self.model.invoke(f"{prompt}")
            print(f"raw_response {raw_response}\n")

            content_key = "content"
            if hasattr(raw_response, content_key):
                content = getattr(raw_response, content_key)
            else:
                content = raw_response

            state["raw_output"] = content
            state["json_output"] = {"ai_message": content}
        except Exception as e:
            state["json_output"] = {}
            # state["error"] = f"模型调用失败: {str(e)}"
        return state

    def run(self, request):
        llm_res = self.call_llm_node(request)
        print(f"llm_res {llm_res}\n")
        return llm_res





if __name__ == '__main__':
    llm = CustomLLM(
        api_url="https://copilot.glodon.com/api/cvforce/aishop/v1/chat/completions",
        access_token=generate_token(api_key="TBDDAGJzAXaX5Zzl", api_secret="LEucuSDPRYCUaLj0UX1vvhoA"),
        # model_name="Aejvnm7q3qmko",  # r1
        model_name = "Awd7m0gtxfphu", # v3
        temperature=0.3,  # 确定性输出
        max_tokens=8000  # 减少token消耗
    )
    # print(llm.invoke("你是谁？"))
    agent_client = PartialMatchAgent(text_key="input_text", model=llm)

    res = agent_client.run({"input_text": " 10.6  剪力墙(柱)边≤200mm的门垛采用混凝土浇筑,做法见图10.2"})
    print(f"res {res} type {type(res)}")